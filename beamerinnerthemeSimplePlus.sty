%-------------------------------------------------------------
%  Package: beamertheme-SimplePlus
%  Author: Pin-Yen Huang (pyhuang97@gmail.com)
%  Version: 1.1, 2025-01-07
%  Link: https://github.com/pm25/SimplePlus-BeamerTheme
%  This is free and unencumbered software released into the
%  public domain; see <http://unlicense.org> for details.
%-------------------------------------------------------------

%--------------------------------------
%  Inner Theme Settings
%--------------------------------------

\pgfdeclareverticalshading[lower.bg,upper.bg]{bmb@transition}{200cm}{%
color(0pt)=(lower.bg); color(2pt)=(lower.bg); color(4pt)=(lower.bg)}

\setbeamersize{text margin left=2em,text margin right=2em}

\setbeamertemplate{footline}[frame number]
\setbeamertemplate{navigation symbols}{}

\setbeamertemplate{blocks}[rounded][shadow=false]

\setbeamertemplate{enumerate items}[default]
\setbeamertemplate{enumerate subitem}[default]
\setbeamertemplate{itemize items}[circle]
\setbeamertemplate{itemize subitem}[circle]

% table of contents (overview) settings
\setbeamertemplate{section in toc}[sections numbered]
\setbeamertemplate{subsection in toc}{%
    \leavevmode
    \leftskip=3.2em
    \rlap{\hskip-2em\inserttocsectionnumber.\inserttocsubsectionnumber}
    \inserttocsubsection\par
}

% frame title customization
\setbeamertemplate{frametitle}{%
    \vspace*{0.5em}
    \bfseries\insertframetitle\par
    \vskip-6pt
    \hrulefill\vspace{-0.1em}
}

% title page customization
\setbeamertemplate{title page}{%
    \vspace{2em}
    \begingroup
    \centering
    % ------------------------
    \begin{beamercolorbox}[sep=10pt,center]{title}
        \usebeamerfont{title}\inserttitle\par%
        \ifx\insertsubtitle\@empty%
        \else%
        \vskip0.25em%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
        \fi%
    \end{beamercolorbox}%
    \vskip0.35em\par
    % ------------------------
    \begin{beamercolorbox}[sep=8pt,center]{author}
        \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \vskip-1em
    % ------------------------
    \begin{beamercolorbox}[sep=8pt,center]{institute}
        \usebeamerfont{institute}\insertinstitute
    \end{beamercolorbox}
    % ------------------------
    \begin{beamercolorbox}[sep=8pt,center]{date}
        \usebeamerfont{date}\insertdate
    \end{beamercolorbox}\vskip0.5em
    % ------------------------
    {\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}
    \endgroup
    \vfill
}

% Modern footline with section â€¢ subsection and frame numbers
\makeatletter
\setbeamertemplate{footline}{
  \ifnum\insertpagenumber=1
    % No footer on title slide
  \else
    \ifbeamer@plainframe
      % No footer on plain frames (like section pages)
    \else
      \leavevmode%
      \hbox{%
        \begin{beamercolorbox}[wd=0.5\paperwidth,ht=2.5ex,dp=1.5ex,left]{author in head/foot}%
          \hspace{1em}\insertsectionhead%
          \ifx\insertsubsectionhead\@empty%
          \else%
            \hspace{0.75em}$\blacktriangleright$\hspace{0.75em}\insertsubsectionhead%
          \fi
        \end{beamercolorbox}%
        \begin{beamercolorbox}[wd=0.5\paperwidth,ht=2.5ex,dp=1.5ex,right]{author in head/foot}%
          \insertframenumber{} / \inserttotalframenumber\hspace{1em}
        \end{beamercolorbox}%
      }%
      \vskip0pt%
    \fi
  \fi
}
\makeatother


% Clean section page without footer
\AtBeginSection[]{
  \begin{frame}[plain]
    \vfill
    \centering
    % Big semi-transparent section number in background
    \makebox[0pt][c]{\transparent{0.3}\textcolor{structure}{\fontsize{80pt}{80pt}\selectfont\textbf{\insertsectionnumber}}}
    
    % Actual visible title in front
    \vspace{2em}
    {\usebeamerfont{section title}\Huge\textbf{\textcolor{structure}\insertsectionhead}}
    
    \vfill
  \end{frame}
}

% Logo on all slides except title slide
\makeatletter
\setbeamertemplate{logo}{%
  \ifnum\value{framenumber}>1
    \hspace{0.8cm}\raisebox{-0.6cm}{\moonlogo}
  \fi
}
\makeatother
